const searchButton=document.querySelector(".button-search"),searchPopup=document.querySelector(".modal"),searchForm=searchPopup.querySelector(".modal-search-form"),searchArrivalDate=searchPopup.querySelector("[name=arrival-date]"),searchDepartureDate=searchPopup.querySelector("[name=departure-date]"),searchAdults=searchPopup.querySelector("[name=adults]"),searchChildren=searchPopup.querySelector("[name=children]");searchPopup.classList.add("modal-hide");let isStorageSupport=!0,storageAdults="",storageChildren="";try{storageAdults=localStorage.getItem("adults"),storageChildren=localStorage.getItem("children")}catch(a){isStorageSupport=!1}searchButton.addEventListener("click",function(a){a.preventDefault(),searchPopup.classList.toggle("modal-show"),searchPopup.classList.toggle("modal-hide"),searchPopup.classList.contains("modal-show")?(storageAdults&&storageChildren&&(searchAdults.value=storageAdults,searchChildren.value=storageChildren),searchArrivalDate.focus()):searchPopup.classList.remove("modal-error")}),searchForm.addEventListener("submit",function(a){searchArrivalDate.value&&searchDepartureDate.value&&searchAdults.value&&searchChildren.value?isStorageSupport&&(localStorage.setItem("adults",searchAdults.value),localStorage.setItem("children",searchChildren.value)):(a.preventDefault(),searchPopup.classList.remove("modal-error"),searchPopup.offsetWidth=searchPopup.offsetWidth,searchPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(a){27===a.keyCode&&searchPopup.classList.contains("modal-show")&&(a.preventDefault(),searchPopup.classList.remove("modal-show"),searchPopup.classList.remove("modal-error"))});